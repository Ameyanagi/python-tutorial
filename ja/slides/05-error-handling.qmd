---
title: "ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°"
subtitle: "ä¾‹å¤–å‡¦ç†ã¨ãƒ‡ãƒãƒƒã‚°"
format:
  revealjs:
    theme: default
    transition: slide
    background-transition: fade
    highlight-style: github
    code-fold: false
    controls: true
    controlsLayout: edges
    controlsTutorial: true
    progress: true
    slideNumber: true
    chalkboard: true
    menu: true
    keyboard: true
    overview: true
    touch: true
    hash: true
    history: true
    previewLinks: auto
    
    footer: "Python ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°"
    width: 1050
    height: 700
    margin: 0.1
    center: false
    navigationMode: linear
    loop: false
    rtl: false
    # Mobile-specific optimizations
    mobileViewDistance: 2
    embedded: false
    minScale: 0.2
    maxScale: 2.0
    disableLayout: false
---

# ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° {background-color="#2E86AB"}

## ã‚¨ãƒ©ãƒ¼ã¨ã¯ï¼Ÿ

::: {.incremental}
- **ã‚¨ãƒ©ãƒ¼** ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè¡Œä¸­ã«ç™ºç”Ÿã™ã‚‹å•é¡Œ
- é©åˆ‡ã«å‡¦ç†ã•ã‚Œãªã„ã¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹
- Pythonã¯ã‚¨ãƒ©ãƒ¼ã‚’æ•æ‰ã—é©åˆ‡ã«å‡¦ç†ã™ã‚‹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã‚’æä¾›
- è‰¯ã„ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å …ç‰¢ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã«ã™ã‚‹
:::

::: {.fragment}
```python
# ã“ã‚Œã¯ã‚¨ãƒ©ãƒ¼ã‚’å¼•ãèµ·ã“ã—ã¾ã™ï¼
number = int("hello")  # ValueError: invalid literal
```
:::

## ã‚¨ãƒ©ãƒ¼ã®ç¨®é¡

::: {.columns}
::: {.column width="50%"}
**æ§‹æ–‡ã‚¨ãƒ©ãƒ¼:**
```python
# ã‚³ãƒ­ãƒ³ãŒä¸è¶³
if x > 5
    print("5ã‚ˆã‚Šå¤§ãã„")

# æ‹¬å¼§ã®ä¸ä¸€è‡´
print("Hello"
```
:::

::: {.column width="50%"}
**å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ï¼ˆä¾‹å¤–ï¼‰:**
```python
# ã‚¼ãƒ­é™¤ç®—
result = 10 / 0

# å­˜åœ¨ã—ãªã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
numbers = [1, 2, 3]
print(numbers[5])

# é–“é•ã£ãŸãƒ‡ãƒ¼ã‚¿å‹
int("hello")
```
:::
:::

## ã‚ˆãã‚ã‚‹ä¾‹å¤–ã®ç¨®é¡

::: {.fragment}
```python
# ValueError: ãƒ‡ãƒ¼ã‚¿å‹ã«å¯¾ã—ã¦é–“é•ã£ãŸå€¤
int("abc")
float("hello")

# TypeError: é–“é•ã£ãŸãƒ‡ãƒ¼ã‚¿å‹
"hello" + 5
len(42)

# IndexError: ãƒªã‚¹ãƒˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒç¯„å›²å¤–
my_list = [1, 2, 3]
my_list[10]

# KeyError: è¾æ›¸ã®ã‚­ãƒ¼ãŒå­˜åœ¨ã—ãªã„
my_dict = {"åå‰": "å¤ªéƒ"}
my_dict["å¹´é½¢"]

# FileNotFoundError: ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„
open("nonexistent.txt")
```
:::

## try-except ãƒ–ãƒ­ãƒƒã‚¯

::: {.fragment}
**åŸºæœ¬æ§‹æ–‡:**
```python
try:
    # ã‚¨ãƒ©ãƒ¼ã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰
    risky_code()
except ExceptionType:
    # ã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†ã™ã‚‹ã‚³ãƒ¼ãƒ‰
    handle_error()
```
:::

::: {.fragment}
**ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹:**
```python
try:
    number = int(input("æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„: "))
    result = 10 / number
    print(f"çµæœ: {result}")
except ValueError:
    print("æœ‰åŠ¹ãªæ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼")
except ZeroDivisionError:
    print("ã‚¼ãƒ­ã§å‰²ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ï¼")
```
:::

## è¤‡æ•°ã®ä¾‹å¤–ã‚’æ•æ‰

::: {.fragment}
**è¤‡æ•°ã®exceptãƒ–ãƒ­ãƒƒã‚¯:**
```python
try:
    age = int(input("å¹´é½¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„: "))
    category = determine_category(age)
    print(f"ã‚ãªãŸã¯{category}ã‚«ãƒ†ã‚´ãƒªã§ã™")
except ValueError:
    print("å¹´é½¢ã¯æ•°å€¤ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼")
except TypeError:
    print("ç„¡åŠ¹ãªå¹´é½¢å½¢å¼ã§ã™ï¼")
except Exception as e:
    print(f"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
```
:::

::: {.fragment}
**è¤‡æ•°ã®ä¾‹å¤–ã‚’ã¾ã¨ã‚ã¦æ•æ‰:**
```python
try:
    # ä½•ã‚‰ã‹ã®ãƒªã‚¹ã‚¯ã®ã‚ã‚‹æ“ä½œ
    process_data()
except (ValueError, TypeError, IndexError):
    print("ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸï¼")
```
:::

## else ã¨ finally å¥

::: {.fragment}
**else: ä¾‹å¤–ãŒç™ºç”Ÿã—ãªã‹ã£ãŸå ´åˆã«å®Ÿè¡Œ**
```python
try:
    number = int(input("æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„: "))
except ValueError:
    print("ç„¡åŠ¹ãªå…¥åŠ›ã§ã™ï¼")
else:
    print(f"å…¥åŠ›ã•ã‚ŒãŸæ•°å€¤: {number}")
    # ã“ã‚Œã¯ä¾‹å¤–ãŒç™ºç”Ÿã—ãªã‹ã£ãŸå ´åˆã®ã¿å®Ÿè¡Œã•ã‚Œã‚‹
```
:::

::: {.fragment}
**finally: å¸¸ã«å®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚³ãƒ¼ãƒ‰ï¼‰**
```python
try:
    file = open("data.txt", "r")
    content = file.read()
except FileNotFoundError:
    print("ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼")
finally:
    # ã“ã‚Œã¯å¸¸ã«å®Ÿè¡Œã•ã‚Œã‚‹ - ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã«é©ã—ã¦ã„ã‚‹
    if 'file' in locals():
        file.close()
```
:::

## ä¾‹å¤–æƒ…å ±ã®å–å¾—

::: {.fragment}
```python
try:
    result = 10 / 0
except ZeroDivisionError as e:
    print(f"ã‚¨ãƒ©ãƒ¼ã®è©³ç´°: {e}")
    print(f"ã‚¨ãƒ©ãƒ¼ã®ç¨®é¡: {type(e).__name__}")

# ã‚ˆã‚Šè©³ç´°ãªæƒ…å ±
import traceback

try:
    risky_operation()
except Exception as e:
    print("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:")
    print(traceback.format_exc())
```
:::

## ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ã®ä½œæˆ

::: {.fragment}
```python
class CustomError(Exception):
    """ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ã‚¯ãƒ©ã‚¹"""
    def __init__(self, message, error_code=None):
        super().__init__(message)
        self.error_code = error_code

class AgeError(Exception):
    """å¹´é½¢é–¢é€£ã®ã‚¨ãƒ©ãƒ¼"""
    pass

def validate_age(age):
    if age < 0:
        raise AgeError("å¹´é½¢ã¯è² ã®å€¤ã«ã¯ã§ãã¾ã›ã‚“")
    if age > 150:
        raise AgeError("å¹´é½¢ãŒç¾å®Ÿçš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“")
    return True

try:
    validate_age(-5)
except AgeError as e:
    print(f"å¹´é½¢ã‚¨ãƒ©ãƒ¼: {e}")
```
:::

## ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

::: {.fragment}
```python
def read_file_safely(filename):
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            content = file.read()
            return content
    except FileNotFoundError:
        print(f"ãƒ•ã‚¡ã‚¤ãƒ« '{filename}' ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        return None
    except PermissionError:
        print(f"ãƒ•ã‚¡ã‚¤ãƒ« '{filename}' ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“")
        return None
    except UnicodeDecodeError:
        print(f"ãƒ•ã‚¡ã‚¤ãƒ« '{filename}' ã®æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“")
        return None

# ä½¿ç”¨ä¾‹
content = read_file_safely("example.txt")
if content:
    print("ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚ŠæˆåŠŸ")
```
:::

## assertæ–‡ã§ã®ãƒ‡ãƒãƒƒã‚°

::: {.fragment}
```python
def divide(a, b):
    # ãƒ‡ãƒãƒƒã‚°ç”¨ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
    assert isinstance(a, (int, float)), "aã¯æ•°å€¤ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"
    assert isinstance(b, (int, float)), "bã¯æ•°å€¤ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™"
    assert b != 0, "bã¯ã‚¼ãƒ­ã§ã‚ã£ã¦ã¯ã„ã‘ã¾ã›ã‚“"
    
    return a / b

# ãƒ†ã‚¹ãƒˆ
try:
    result = divide(10, "2")  # AssertionError ãŒç™ºç”Ÿ
except AssertionError as e:
    print(f"ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼: {e}")

# æœ¬ç•ªç’°å¢ƒã§ã¯ assert ã‚’ç„¡åŠ¹åŒ–ã§ãã‚‹
# python -O script.py
```
:::

## ãƒ­ã‚°è¨˜éŒ²ã¨ã‚¨ãƒ©ãƒ¼è¿½è·¡

::: {.fragment}
```python
import logging

# ãƒ­ã‚°è¨­å®š
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s'
)

def process_user_data(data):
    try:
        # ãƒ‡ãƒ¼ã‚¿å‡¦ç†
        result = complex_calculation(data)
        logging.info("ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸ")
        return result
    except ValueError as e:
        logging.error(f"ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ©ãƒ¼: {e}")
        raise
    except Exception as e:
        logging.critical(f"äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼: {e}")
        raise

# ä½¿ç”¨ä¾‹
try:
    result = process_user_data([1, 2, 3])
except Exception:
    logging.error("ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ")
```
:::

## å®Ÿè·µæ¼”ç¿’ {background-color="#F18F01"}

## æ¼”ç¿’: ãƒ­ãƒã‚¹ãƒˆãªè¨ˆç®—æ©Ÿ

```python
class Calculator:
    def __init__(self):
        self.history = []
    
    def calculate(self, expression):
        try:
            # å®‰å…¨ãªè©•ä¾¡ï¼ˆevalã¯å±é™ºãªã®ã§åˆ¶é™ã•ã‚ŒãŸç’°å¢ƒã§ï¼‰
            allowed_chars = set('0123456789+-*/(). ')
            if not all(c in allowed_chars for c in expression):
                raise ValueError("ç„¡åŠ¹ãªæ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã¾ã™")
            
            result = eval(expression)
            self.history.append(f"{expression} = {result}")
            return result
            
        except ZeroDivisionError:
            return "ã‚¨ãƒ©ãƒ¼: ã‚¼ãƒ­é™¤ç®—"
        except ValueError as e:
            return f"ã‚¨ãƒ©ãƒ¼: {e}"
        except SyntaxError:
            return "ã‚¨ãƒ©ãƒ¼: ç„¡åŠ¹ãªå¼"

# ä½¿ç”¨ä¾‹
calc = Calculator()
expressions = ["2+2", "10/0", "2*invalid", "3**2"]

for expr in expressions:
    result = calc.calculate(expr)
    print(f"{expr} â†’ {result}")
```

## æ¼”ç¿’: ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ 

```python
import json

class DataManager:
    def __init__(self, filename):
        self.filename = filename
        self.data = self.load_data()
    
    def load_data(self):
        try:
            with open(self.filename, 'r', encoding='utf-8') as file:
                return json.load(file)
        except FileNotFoundError:
            print("ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚")
            return {}
        except json.JSONDecodeError:
            print("ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãŒç ´æã—ã¦ã„ã¾ã™ã€‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒã—ã¦ãã ã•ã„ã€‚")
            return {}
    
    def save_data(self):
        try:
            with open(self.filename, 'w', encoding='utf-8') as file:
                json.dump(self.data, file, ensure_ascii=False, indent=2)
            return True
        except PermissionError:
            print("ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®æ›¸ãè¾¼ã¿æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚")
            return False
        except Exception as e:
            print(f"ä¿å­˜ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
            return False

# ä½¿ç”¨ä¾‹
manager = DataManager("user_data.json")
manager.data["users"] = ["å¤ªéƒ", "èŠ±å­"]
if manager.save_data():
    print("ãƒ‡ãƒ¼ã‚¿ãŒæ­£å¸¸ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸ")
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ {background-color="#A23B72"}

::: {.incremental}
1. **å…·ä½“çš„ãªä¾‹å¤–ã‚’æ•æ‰** - `Exception`ã§ã¯ãªãå…·ä½“çš„ãªä¾‹å¤–å‹ã‚’ä½¿ç”¨
2. **é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸** - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ†ã‹ã‚Šã‚„ã™ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æä¾›
3. **ãƒ­ã‚°è¨˜éŒ²** - ã‚¨ãƒ©ãƒ¼ã‚’é©åˆ‡ã«ãƒ­ã‚°ã«è¨˜éŒ²
4. **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—** - `finally`ã‚„`with`æ–‡ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’ç¢ºå®Ÿã«è§£æ”¾
5. **ä¾‹å¤–ã®å†ç™ºç”Ÿ** - å¿…è¦ã«å¿œã˜ã¦ä¾‹å¤–ã‚’å†ç™ºç”Ÿã•ã›ã‚‹
:::

## æ¬¡ã®å†…å®¹

::: {.incremental}
- **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸** (ã‚³ãƒ¼ãƒ‰ã®æ•´ç†)
- **ã‚¯ãƒ©ã‚¹ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ** (ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°)
- **ç¶™æ‰¿** (ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨)
- **ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ** (ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–)
:::

## ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼ {background-color="#C73E1D"}

### è³ªå•ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ

æ¬¡ã¯ [ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](../book/06-modules.html) ã«é€²ã¿ã¾ã—ã‚‡ã†ï¼

---

**ãƒªã‚½ãƒ¼ã‚¹:**
- [Python.org - ã‚¨ãƒ©ãƒ¼](https://docs.python.org/ja/3/tutorial/errors.html)
- [Real Python - ä¾‹å¤–å‡¦ç†](https://realpython.com/python-exceptions/)
- [Python Tutor](http://pythontutor.com)

---

## ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

::: {.columns}
::: {.column width="33%"}
**å‰ã¸:**  
[é–¢æ•°](04-functions.html)
:::
::: {.column width="33%"}
**ãƒ›ãƒ¼ãƒ :**  
[ğŸ“š ã‚¹ãƒ©ã‚¤ãƒ‰ä¸€è¦§](index.html) | [ğŸ“– ãƒ–ãƒƒã‚¯](../book/index.html)
:::
::: {.column width="33%"}
**æ¬¡ã¸:**  
[ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](06-modules.html)
:::
:::